<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>Nexus - UMIACS</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"ZyGb0W-U2O2dI-Jxwk5TzgAAAAg","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Nexus","wgTitle":"Nexus","wgCurRevisionId":12153,"wgRevisionId":12153,"wgArticleId":3161,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Nexus","wgRelevantArticleId":3161,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVector2022PreviewPages":[]};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready",
"user.options":"loading","skins.vector.styles.legacy":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link href="/umiacs/load.php?lang=en&amp;modules=skins.vector.styles.legacy&amp;only=styles&amp;skin=vector" rel="stylesheet"/>
<script async="" src="/umiacs/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/umiacs/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector" rel="stylesheet"/>
<meta content="MediaWiki 1.39.10" name="generator"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="width=1000" name="viewport"/>
<link href="/favicon.ico" rel="icon"/>
<link href="/umiacs/opensearch_desc.php" rel="search" title="UMIACS (en)" type="application/opensearchdescription+xml"/>
<link href="https://wiki.umiacs.umd.edu/umiacs/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="/umiacs/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="UMIACS Atom feed" type="application/atom+xml"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Nexus rootpage-Nexus skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div class="noprint" id="mw-page-base"></div>
<div class="noprint" id="mw-head-base"></div>
<div class="mw-body" id="content" role="main">
<a id="top"></a>
<div id="siteNotice"></div>
<div class="mw-indicators">
</div>
<h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Nexus</span></h1>
<div class="vector-body" id="bodyContent">
<div class="noprint" id="siteSub">From UMIACS</div>
<div id="contentSub"></div>
<div id="contentSub2"></div>
<div id="jump-to-nav"></div>
<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
<a class="mw-jump-link" href="#searchInput">Jump to search</a>
<div class="mw-body-content mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>The Nexus is the combined scheduler of resources in UMIACS.  The resource manager for Nexus is <a href="/umiacs/index.php/SLURM" title="SLURM">SLURM</a>.  Resources are arranged into partitions where users are able to schedule computational jobs.  Users are arranged into a number of SLURM accounts based on faculty, lab, or center investments.
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Getting_Started"><span class="tocnumber">1</span> <span class="toctext">Getting Started</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Access"><span class="tocnumber">1.1</span> <span class="toctext">Access</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Jobs"><span class="tocnumber">1.2</span> <span class="toctext">Jobs</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Interactive"><span class="tocnumber">1.2.1</span> <span class="toctext">Interactive</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Batch"><span class="tocnumber">1.2.2</span> <span class="toctext">Batch</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Partitions"><span class="tocnumber">2</span> <span class="toctext">Partitions</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Quality_of_Service_(QoS)"><span class="tocnumber">3</span> <span class="toctext">Quality of Service (QoS)</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Job_QoS"><span class="tocnumber">3.1</span> <span class="toctext">Job QoS</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Partition_QoS"><span class="tocnumber">3.2</span> <span class="toctext">Partition QoS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Storage"><span class="tocnumber">4</span> <span class="toctext">Storage</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Home_Directories"><span class="tocnumber">4.1</span> <span class="toctext">Home Directories</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Scratch_Directories"><span class="tocnumber">4.2</span> <span class="toctext">Scratch Directories</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Network_Scratch_Directories"><span class="tocnumber">4.2.1</span> <span class="toctext">Network Scratch Directories</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Local_Scratch_Directories"><span class="tocnumber">4.2.2</span> <span class="toctext">Local Scratch Directories</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Faculty_Allocations"><span class="tocnumber">4.3</span> <span class="toctext">Faculty Allocations</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Project_Allocations"><span class="tocnumber">4.4</span> <span class="toctext">Project Allocations</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Datasets"><span class="tocnumber">4.5</span> <span class="toctext">Datasets</span></a></li>
</ul>
</li>
</ul>
</div>
<h1><span class="mw-headline" id="Getting_Started">Getting Started</span></h1>
<p>All accounts in UMIACS are sponsored.  If you don't already have a UMIACS account, please see <a href="/umiacs/index.php/Accounts" title="Accounts">Accounts</a> for information on getting one.  You need a full UMIACS account (not a <a href="/umiacs/index.php/Accounts/Collaborator" title="Accounts/Collaborator"> collaborator account</a>) in order to access Nexus.
</p>
<h2><span class="mw-headline" id="Access">Access</span></h2>
<p>Your access to submission nodes (alternatively called login nodes) for Nexus computational resources is determined by your account sponsor's department, center, or lab affiliation.  You can log into the <a class="external text" href="https://intranet.umiacs.umd.edu/directory/cr/" rel="nofollow">UMIACS Directory CR application</a> and select the Computational Resource (CR) in the list that has the prefix <code>nexus</code>.  The Hosts section lists your available submission nodes - generally a pair of nodes of the format <tt>nexus&lt;department, lab, or center abbreviation&gt;[00,01]</tt>, e.g., <tt>nexusgroup00</tt> and <tt>nexusgroup01</tt>.
</p><p><b>Note</b> - UMIACS requires multi-factor authentication through our <a href="/umiacs/index.php/Duo" title="Duo">Duo</a> instance.  This is completely discrete from both UMD's and CSD's Duo instances.  You will need to enroll one or more devices to access resources in UMIACS, and will be prompted to enroll when you log into the Directory application for the first time.
</p><p>Once you have identified your submission nodes, you can <a class="mw-redirect" href="/umiacs/index.php/SSH" title="SSH">SSH</a> directly into them.  From there, you are able to submit to the cluster via our <a href="/umiacs/index.php/SLURM" title="SLURM">SLURM</a> workload manager.  You need to make sure that your submitted jobs have the correct account, partition, and qos.
</p>
<h2><span class="mw-headline" id="Jobs">Jobs</span></h2>
<p><a href="/umiacs/index.php/SLURM" title="SLURM">SLURM</a> jobs are <a href="/umiacs/index.php/SLURM/JobSubmission" title="SLURM/JobSubmission"> submitted</a> by either <code>srun</code> or <code>sbatch</code> depending if you are doing an interactive job or batch job, respectively.  You need to provide the where/how/who to run the job and specify the resources you need to run with.
</p><p>For the who/where/how, you may be required to specify <code>--account</code>, <code>--partition</code>, and/or <code>--qos</code> (respectively) to be able to adequately submit jobs to the Nexus.
</p><p>For resources, you may need to specify <code>--time</code> for time, <code>--ntasks</code> for CPUs, <code>--mem</code> for RAM, and <code>--gres=gpu</code> for GPUs in your submission arguments to meet your requirements.  There are defaults for all four, so if you don't specify something, you may be scheduled with a very minimal set of time and resources (e.g., by default, NO GPUs are included if you do not specify <code>--gres=gpu</code>).  For more information about submission flags for GPU resources, see <a href="/umiacs/index.php/SLURM/JobSubmission#Requesting_GPUs" title="SLURM/JobSubmission"> here</a>.  You can also can run <code>man srun</code> on your submission node for a complete list of available submission arguments.
</p><p>For a list of available GPU types on Nexus and their specs, please see <a href="/umiacs/index.php/Nexus/GPUs" title="Nexus/GPUs">Nexus/GPUs</a>.
</p>
<h3><span class="mw-headline" id="Interactive">Interactive</span></h3>
<p>Once logged into a submission node, you can run simple interactive jobs.  If your session is interrupted from the submission node, the job will be killed.  As such, we encourage use of a terminal multiplexer such as <a href="/umiacs/index.php/Tmux" title="Tmux">Tmux</a>.
</p>
<pre>$ srun --pty --ntasks=4 --mem=2gb --gres=gpu:1 nvidia-smi -L
GPU 0: NVIDIA RTX A4000 (UUID: GPU-ae5dc1f5-c266-5b9f-58d5-7976e62b3ca1)
</pre>
<h3><span class="mw-headline" id="Batch">Batch</span></h3>
<p>Batch jobs are scheduled with a script file with an optional ability to embed job scheduling parameters via variables that are defined by <code>#SBATCH</code> lines at the top of the file.  You can find some examples in our <a href="/umiacs/index.php/SLURM/JobSubmission" title="SLURM/JobSubmission">SLURM/JobSubmission</a> documentation.
</p>
<h1><span class="mw-headline" id="Partitions">Partitions</span></h1>
<p>The SLURM resource manager uses partitions to act as job queues which can restrict size, time and user limits.  The Nexus has a number of different partitions of resources.  Different Centers, Labs, and Faculty are able to invest in computational resources that are restricted to approved users through these partitions.
</p><p><b>Partitions usable by all non-<a href="/umiacs/index.php/ClassAccounts" title="ClassAccounts">class account</a> users:</b>
</p>
<ul><li><a href="/umiacs/index.php/Nexus/Tron" title="Nexus/Tron">Nexus/Tron</a> - Pool of resources available to all UMIACS and CSD faculty and graduate students.</li>
<li>Scavenger - <a class="external text" href="https://slurm.schedmd.com/preempt.html" rel="nofollow">Preemption</a> partition that supports nodes from multiple other partitions.  More resources are available to schedule simultaneously than in other partitions, however jobs are subject to preemption rules.  You are responsible for ensuring your jobs handle this preemption correctly.  The SLURM scheduler will simply restart a preempted job with the same submission arguments when it is available to run again. For an overview of things you can check within scripts to determine if your job was preempted/resumed, see <a href="/umiacs/index.php/SLURM/Preemption" title="SLURM/Preemption">SLURM/Preemption</a>. Only contains <a class="external text" href="https://en.wikipedia.org/wiki/X86-64" rel="nofollow">x86_64</a> architecture nodes.</li>
<li>Scavenger (aarch64) - Preemption partition identical in design to <tt>scavenger</tt>, but only contains <a class="external text" href="https://en.wikipedia.org/wiki/AArch64" rel="nofollow">aarch64</a> architecture nodes.</li></ul>
<p><b>Partitions usable by <a href="/umiacs/index.php/ClassAccounts" title="ClassAccounts">ClassAccounts</a>:</b>
</p>
<ul><li><a href="/umiacs/index.php/ClassAccounts" title="ClassAccounts"> Class</a> - Pool available for UMIACS class accounts sponsored by either UMIACS or CSD faculty.</li></ul>
<p><b>Partitions usable by specific lab/center users:</b>
</p>
<ul><li><a href="/umiacs/index.php/Nexus/CBCB" title="Nexus/CBCB">Nexus/CBCB</a> - CBCB lab pool available for CBCB lab members.</li>
<li><a href="/umiacs/index.php/Nexus/CLIP" title="Nexus/CLIP">Nexus/CLIP</a> - CLIP lab pool available for CLIP lab members.</li>
<li><a href="/umiacs/index.php/Nexus/CML" title="Nexus/CML">Nexus/CML</a> - CML lab pool available for CML lab members.</li>
<li><a href="/umiacs/index.php/Nexus/GAMMA" title="Nexus/GAMMA">Nexus/GAMMA</a> - GAMMA lab pool available for GAMMA lab members.</li>
<li><a href="/umiacs/index.php/Nexus/MBRC" title="Nexus/MBRC">Nexus/MBRC</a> - MBRC lab pool available for MBRC lab members.</li>
<li><a href="/umiacs/index.php/Nexus/MC2" title="Nexus/MC2">Nexus/MC2</a> - MC2 lab pool available for MC2 lab members.</li>
<li><a href="/umiacs/index.php/Nexus/Vulcan" title="Nexus/Vulcan">Nexus/Vulcan</a> - Vulcan lab pool available for Vulcan lab members.</li></ul>
<h1><span id="Quality_of_Service_.28QoS.29"></span><span class="mw-headline" id="Quality_of_Service_(QoS)">Quality of Service (QoS)</span></h1>
<p>SLURM uses Quality of Service (QoS) both to provide limits on job sizes (termed by us as "job QoS") as well as to limit resources used by all jobs running in a partition, either per user or per group (termed by us as "partition QoS").
</p>
<h3><span class="mw-headline" id="Job_QoS">Job QoS</span></h3>
<p>Job QoS are used to provide limits on the size of job that you can run. You should try to allocate only the resources your job actually needs, as resources that each of your jobs schedules are counted against your <a href="/umiacs/index.php/SLURM/Priority#Fair-share" title="SLURM/Priority"> fair-share priority</a> in the future.
</p>
<ul><li>default - Default job QoS. Limited to 4 CPU cores, 1 GPU, and 32GB RAM per job.  The maximum wall time per job is 3 days.</li>
<li>medium - Limited to 8 CPU cores, 2 GPUs, and 64GB RAM per job.  The maximum wall time per job is 2 days.</li>
<li>high - Limited to 16 CPU cores, 4 GPUs, and 128GB RAM per job.  The maximum wall time per job is 1 day.</li>
<li>scavenger - No resource limits per job, only a maximum wall time per job of 3 days.  You are responsible for ensuring your job requests multiple nodes if it requests resources beyond what any one node is capable of.  576 total CPU cores, 72 total GPUs, and 2304GB total RAM are permitted simultaneously across all of your jobs running with this job QoS.  This job QoS is paired 1-1 with the scavenger partition. To use this job QoS, include <code>--partition=scavenger</code> and <code>--account=scavenger</code> in your submission arguments.  Do not include any job QoS argument other than <code>--qos=scavenger</code> (optional) or submission will fail.</li>
<li>scavenger-aarch64 - No resource limits per job, only a maximum wall time per job of 3 days.  You are responsible for ensuring your job requests multiple nodes if it requests resources beyond what any one node is capable of.  1600 total CPU cores and 281140MB total RAM are permitted simultaneously across all of your jobs running with this job QoS.  This job QoS is paired 1-1 with the scavenger-aarch64 partition. To use this job QoS, include <code>--partition=scavenger-aarch64</code>, <code>--account=scavenger</code>, and <code>--qos=scavenger-aarch64</code> in your submission arguments.</li></ul>
<p>You can display these job QoS from the command line using the <code>show_qos</code> command.  By default, the command will only show job QoS that you can access.  The above four job QoS are the ones that everyone can access.
</p>
<pre>$ show_qos
                Name     MaxWall                        MaxTRES MaxJobsPU                      MaxTRESPU 
-------------------- ----------- ------------------------------ --------- ------------------------------ 
             default  3-00:00:00       cpu=4,gres/gpu=1,mem=32G                                          
                high  1-00:00:00     cpu=16,gres/gpu=4,mem=128G                                          
              medium  2-00:00:00       cpu=8,gres/gpu=2,mem=64G                                          
           scavenger  3-00:00:00                                           cpu=576,gres/gpu=72,mem=2304G 
   scavenger-aarch64  3-00:00:00                                                    cpu=1600,mem=281140M 
</pre>
<p>If you want to see all job QoS, including those that you do not have access to, you can use the <code>show_qos --all</code> command. 
</p>
<pre>$ show_qos --all
                Name     MaxWall                        MaxTRES MaxJobsPU                      MaxTRESPU
-------------------- ----------- ------------------------------ --------- ------------------------------
             cml-cpu  7-00:00:00                                        8
         cml-default  7-00:00:00       cpu=4,gres/gpu=1,mem=32G         2
            cml-high  1-12:00:00     cpu=16,gres/gpu=4,mem=128G         2
       cml-high_long 14-00:00:00              cpu=32,gres/gpu=8         8                     gres/gpu=8
          cml-medium  3-00:00:00       cpu=8,gres/gpu=2,mem=64G         2
       cml-scavenger  3-00:00:00                                                             gres/gpu=24
       cml-very_high  1-12:00:00     cpu=32,gres/gpu=8,mem=256G         8                    gres/gpu=12
             default  3-00:00:00       cpu=4,gres/gpu=1,mem=32G
                high  1-00:00:00     cpu=16,gres/gpu=4,mem=128G
             highmem 21-00:00:00                 cpu=128,mem=2T
           huge-long 10-00:00:00     cpu=32,gres/gpu=8,mem=256G
         interactive    12:00:00                 cpu=4,mem=128G
              medium  2-00:00:00       cpu=8,gres/gpu=2,mem=64G
        oasis-exempt 10-00:00:00                                                      cpu=160,mem=28114M
           scavenger  3-00:00:00                                           cpu=576,gres/gpu=72,mem=2304G
   scavenger-aarch64  3-00:00:00                                                    cpu=1600,mem=281140M
          vulcan-cpu  2-00:00:00                cpu=1024,mem=4T         4
      vulcan-default  7-00:00:00       cpu=4,gres/gpu=1,mem=32G         2
       vulcan-exempt  7-00:00:00     cpu=32,gres/gpu=8,mem=256G         2
         vulcan-high  1-12:00:00     cpu=16,gres/gpu=4,mem=128G         2
    vulcan-high_long 14-00:00:00              cpu=32,gres/gpu=8         8                     gres/gpu=8
       vulcan-medium  3-00:00:00       cpu=8,gres/gpu=2,mem=64G         2
       vulcan-sailon  3-00:00:00     cpu=32,gres/gpu=8,mem=256G                              gres/gpu=48
    vulcan-scavenger  3-00:00:00     cpu=32,gres/gpu=8,mem=256G
</pre>
<p>To find out what accounts and partitions you have access to, first use the <code>show_assoc</code> command to show your account/job QoS combinations. Then, use the <code>scontrol show partition</code> command and note the <tt>AllowAccounts</tt> entry for each listed partition. You are able to submit to any partition that allows an account that you have. If you need to use an account other than the default account <tt>nexus</tt>, you will need to specify it via the <code>--account</code> submission argument.
</p>
<h3><span class="mw-headline" id="Partition_QoS">Partition QoS</span></h3>
<p>Partition QoS are used to limit resources used by all jobs running in a partition, either per user (MaxTRESPU) or per group (GrpTRES).
</p><p>To view partition QoS, use the <code>show_partition_qos</code> command.
</p>
<pre>$ show_partition_qos
                Name MaxSubmitPU                      MaxTRESPU              GrpTRES
-------------------- ----------- ------------------------------ --------------------
           scavenger         500  cpu=576,gres/gpu=72,mem=2304G
   scavenger-aarch64         500           cpu=1600,mem=281140M
                tron         500     cpu=32,gres/gpu=4,mem=256G
</pre>
<p>If you want to see all partition QoS, including those that you do not have access to, you can use the <code>show_partition_qos --all</code> command. 
</p>
<pre>$ show_partition_qos --all
                Name MaxSubmitPU                      MaxTRESPU              GrpTRES
-------------------- ----------- ------------------------------ --------------------
                cbcb         500                                 cpu=1228,mem=48003G
           cbcb-heng         500
    cbcb-interactive         500
               class         500     cpu=32,gres/gpu=4,mem=256G
                clip         500                                   cpu=564,mem=5590G
                 cml         500                                 cpu=1096,mem=10890G
             cml-cpu         500
         cml-furongh         500
       cml-scavenger         500                    gres/gpu=24
           cml-wriva         500
            cml-zhou         500
               gamma         500                                   cpu=616,mem=5204G
                mbrc         500                                   cpu=240,mem=2345G
                 mc2         500                                   cpu=312,mem=3092G
               oasis         500
               quics         500                                   cpu=328,mem=3484G
           scavenger         500  cpu=576,gres/gpu=72,mem=2304G
   scavenger-aarch64         500           cpu=1600,mem=281140M
                tron         500     cpu=32,gres/gpu=4,mem=256G
              vulcan         500                                 cpu=1272,mem=11710G
       vulcan-ampere         500
          vulcan-cpu         500
       vulcan-ramani         500
    vulcan-scavenger         500
</pre>
<p><b>NOTE</b>: These QoS cannot be used directly when submitting jobs, with the exception of the scavenger QoS (i.e., they are not in the AllowQos field for their respective partition). Partition QoS limits apply to all jobs running on a given partition, regardless of what job QoS is used.
</p><p>For example, in the default non-preemption partition (<tt>tron</tt>), you are restricted to 32 total CPU cores, 4 total GPUs, and 256GB total RAM at once across all jobs you have running in the partition.
</p><p>Lab/group-specific partitions may also have their own user limits, and/or may also have group limits on the total number of resources consumed simultaneously by all users that are using their partition, codified by the line in the output above that matches their lab/group name. Note that the values listed above in the two "TRES" columns are not fixed and may fluctuate per-partition as more resources are added to or removed from each partition.
</p><p><b>All partitions also only allow a maximum of 500 submitted (running (R) or pending (PD)) jobs per user in the partition simultaneously.</b> This is to prevent excess pending jobs causing <a class="external text" href="https://slurm.schedmd.com/sched_config.html#backfill" rel="nofollow">backfill</a> issues with the SLURM scheduler.
</p>
<ul><li>If you need to submit more than 500 jobs in batch at once, you can develop and run an "outer submission script" that repeatedly attempts to run an "inner submission script" (your original submission script) to submit jobs in the batch periodically, until all job submissions are successful. The outer submission script should use looping logic to check if you are at the max job limit and should then retry submission after waiting for some time interval.</li></ul>
<dl><dd>An example outer submission script is as follows. In this example, <code>example_inner.sh</code> is your inner submission script and is not an <a href="/umiacs/index.php/SLURM/ArrayJobs" title="SLURM/ArrayJobs"> array job</a>, and you want to run 1000 jobs. If your inner submission script is an array job, adjust the number of jobs accordingly. Array jobs must be of size 500 or less.</dd></dl>
<pre>#!/bin/bash
numjobs=1000
i=0
while [ $i -lt $numjobs ]
do
  while [[ "$(sbatch example_inner.sh 2&gt;&amp;1)" =~ "QOSMaxSubmitJobPerUserLimit" ]]
  do
    echo "Currently at maximum job submissions allowed."
    echo "Waiting for 5 minutes before trying to submit more jobs."
    sleep 300
  done
  i=$(( $i + 1 ))
  echo "Submitted job $i of $numjobs"
done
</pre>
<p>It is suggested that you run the outer submission script in a <a href="/umiacs/index.php/Tmux" title="Tmux">Tmux</a> session to keep the terminal window executing it from being interrupted.
</p>
<h1><span class="mw-headline" id="Storage">Storage</span></h1>
<p>All network storage available in Nexus is currently <a href="/umiacs/index.php/NFS" title="NFS">NFS</a> based, and comes in a few different flavors. Compute nodes also have local storage that can be used.
</p>
<h2><span class="mw-headline" id="Home_Directories">Home Directories</span></h2>
<p>You have 30GB of home directory storage available at <code>/nfshomes/&lt;username&gt;</code>.  It has both <a href="/umiacs/index.php/Snapshots" title="Snapshots">Snapshots</a> and <a class="mw-redirect" href="/umiacs/index.php/TSM" title="TSM"> Backups</a> enabled.
</p><p>Home directories are intended to store personal or configuration files only.  We encourage you to not share any data in your home directory.  You are encouraged to utilize our <a href="/umiacs/index.php/GitLab" title="GitLab">GitLab</a> infrastructure to host your code repositories.
</p><p><b>NOTE</b>: To check your quota on this directory, use the command <code>df -h ~</code>.
</p>
<h2><span class="mw-headline" id="Scratch_Directories">Scratch Directories</span></h2>
<p>Scratch data has no data protection including no snapshots and the data is not backed up. There are two types of scratch directories in the Nexus compute infrastructure:
</p>
<ul><li>Network scratch directories</li>
<li>Local scratch directories</li></ul>
<p>Please note that <a href="/umiacs/index.php/ClassAccounts" title="ClassAccounts"> class accounts</a> do not have network scratch directories.
</p>
<h3><span class="mw-headline" id="Network_Scratch_Directories">Network Scratch Directories</span></h3>
<p>You are allocated 200GB of scratch space via NFS from <code>/fs/nexus-scratch/&lt;USERNAME&gt;</code> where &lt;USERNAME&gt; is your UMIACS username.  <b>It is not backed up or protected in any way.</b>  This directory is <b><a href="/umiacs/index.php/Automounter" title="Automounter"> automounted</a></b>; you will need to <code>cd</code> into the directory or request/specify a fully qualified file path to access it.
</p><p>You can view your quota usage by running <code>df -h /fs/nexus-scratch/&lt;USERNAME&gt;</code>.
</p><p>You may request a permanent increase of up to 400GB total space without any faculty approval by <a href="/umiacs/index.php/HelpDesk" title="HelpDesk"> contacting staff</a>.  If you need space beyond 400GB, you will need faculty approval and/or a <a href="#Project_Allocations"> project allocation</a> for this. If you choose to increase your scratch space beyond 400GB, the increased space is also subject to the 270 TB days limit mentioned in the project allocation section before we check back in for renewal. For example, if you request 1.4TB total space, you may have this for 270 days (1TB beyond the 400GB permanent increase). The amount increased beyond 400GB will also count against your faculty member's 20TB total storage limit mentioned below.
</p><p>This file system is available on all submission, data management, and computational nodes within the cluster.
</p>
<h3><span class="mw-headline" id="Local_Scratch_Directories">Local Scratch Directories</span></h3>
<p>Each computational node that you can schedule compute jobs on also has one or more local scratch directories.  These are always named <code>/scratch0</code>, <code>/scratch1</code>, etc. and <b>are not backed up or protected in any way.</b>  These directories are almost always more performant than any other storage available to the job as they are mounted from disks directly attached to the compute node.  However, you must stage your data within the confines of your job and extract the relevant resultant data elsewhere before the end of your job.
</p><p>These local scratch directories have a tmpwatch job which will <b>delete unaccessed data after 90 days</b>, scheduled via maintenance jobs to run once a month during our <a href="/umiacs/index.php/MonthlyMaintenanceWindow" title="MonthlyMaintenanceWindow"> monthly maintenance windows</a>.  Please make sure you secure any resultant data you wish to keep from these directories at the end of your job.
</p>
<h2><span class="mw-headline" id="Faculty_Allocations">Faculty Allocations</span></h2>
<p>Each faculty member can be allocated 1TB of permanent lab space upon request.  We can also support grouping these individual allocations together into larger center, lab, or research group allocations if desired by the faculty.  Please <a href="/umiacs/index.php/HelpDesk" title="HelpDesk"> contact staff</a> to inquire.
</p><p>Lab space storage is fully protected.  It has <a href="/umiacs/index.php/Snapshots" title="Snapshots"> snapshots</a> enabled and is <a href="/umiacs/index.php/NightlyBackups" title="NightlyBackups"> backed up nightly</a>.
</p>
<h2><span class="mw-headline" id="Project_Allocations">Project Allocations</span></h2>
<p>Project allocations are available per user for 270 TB days; you can have a 1TB allocation for up to 270 days, a 3TB allocation for 90 days, etc..
</p><p>A single faculty member can not have more than 20TB of project allocations across all of their sponsored accounts active simultaneously. Network scratch allocation space increases beyond the 400GB permanent maximum also have the increase count against this limit (i.e., a 1TB network scratch allocation would have 600GB counted towards this limit).
</p><p>Project storage is fully protected.  It has <a href="/umiacs/index.php/Snapshots" title="Snapshots"> snapshots</a> enabled and is <a href="/umiacs/index.php/NightlyBackups" title="NightlyBackups"> backed up nightly</a>.
</p><p>The maximum allocation length you can request is 540 days (500GB space) and the maximum storage space you can request is 9TB (30 day length).
</p><p>To request an allocation, please <a href="/umiacs/index.php/HelpDesk" title="HelpDesk"> contact staff</a> with the faculty member(s) that the project is under involved in the conversation.  Please include the following details:
</p>
<ul><li>Project Name (short)</li>
<li>Description</li>
<li>Size (1TB, 2TB, etc.)</li>
<li>Length in days (270 days, 135 days, etc.)</li>
<li>Other user(s) that need to access the allocation, if any</li></ul>
<p>These allocations are available via <code>/fs/nexus-projects/&lt;project name&gt;</code>.  <b>Renewal is not guaranteed to be available due to limits on the amount of total storage.</b>  Near the end of the allocation period, staff will contact you and ask if you are still in need of the storage allocation.  If renewal is available, you can renew for up to another 270 TB days with reapproval from the original faculty approver.
</p>
<ul><li>If you are no longer in need of the storage allocation, you will need to relocate all desired data within two weeks of the end of the allocation period.  Staff will then remove the allocation.</li>
<li>If you do not respond to staff's request by the end of the allocation period, staff will make the allocation temporarily inaccessible.
<ul><li>If you do respond asking for renewal but the original faculty approver does not respond within two weeks of the end of the allocation period, staff will also make the allocation temporarily inaccessible.</li>
<li>If one month from the end of the allocation period is reached without both you and the faculty approver responding, staff will remove the allocation.</li></ul></li></ul>
<h2><span class="mw-headline" id="Datasets">Datasets</span></h2>
<p>We have read-only dataset storage available at <code>/fs/nexus-datasets</code>.  If there are datasets that you would like to see curated and available, please see <a href="/umiacs/index.php/Datasets" title="Datasets"> this page</a>.
</p><p>The list of Nexus datasets we currently host can be viewed <a class="external text" href="https://info.umiacs.umd.edu/datasets/list/?q=Nexus" rel="nofollow">here</a>.
</p>



</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.umiacs.umd.edu/umiacs/index.php?title=Nexus&amp;oldid=12153">https://wiki.umiacs.umd.edu/umiacs/index.php?title=Nexus&amp;oldid=12153</a>"</div></div>
<div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div>
</div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>
<div id="mw-head">
<nav aria-labelledby="p-personal-label" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" id="p-personal" role="navigation">
<h3 class="vector-menu-heading" id="p-personal-label">
<span class="vector-menu-heading-label">Personal tools</span>
</h3>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"><li class="mw-list-item" id="pt-login"><a accesskey="o" href="/umiacs/index.php?title=Special:UserLogin&amp;returnto=Nexus" title="You are encouraged to log in; however, it is not mandatory [o]"><span>Log in</span></a></li></ul>
</div>
</nav>
<div id="left-navigation">
<nav aria-labelledby="p-namespaces-label" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" id="p-namespaces" role="navigation">
<h3 class="vector-menu-heading" id="p-namespaces-label">
<span class="vector-menu-heading-label">Namespaces</span>
</h3>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"><li class="selected mw-list-item" id="ca-nstab-main"><a accesskey="c" href="/umiacs/index.php/Nexus" title="View the content page [c]"><span>Page</span></a></li><li class="new mw-list-item" id="ca-talk"><a accesskey="t" href="/umiacs/index.php?title=Talk:Nexus&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]"><span>Discussion</span></a></li></ul>
</div>
</nav>
<nav aria-labelledby="p-variants-label" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" id="p-variants" role="navigation">
<input aria-haspopup="true" aria-labelledby="p-variants-label" class="vector-menu-checkbox" data-event-name="ui.dropdown-p-variants" id="p-variants-checkbox" role="button" type="checkbox"/>
<label aria-label="Change language variant" class="vector-menu-heading" id="p-variants-label">
<span class="vector-menu-heading-label">English</span>
</label>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"></ul>
</div>
</nav>
</div>
<div id="right-navigation">
<nav aria-labelledby="p-views-label" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" id="p-views" role="navigation">
<h3 class="vector-menu-heading" id="p-views-label">
<span class="vector-menu-heading-label">Views</span>
</h3>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"><li class="selected mw-list-item" id="ca-view"><a href="/umiacs/index.php/Nexus"><span>Read</span></a></li><li class="mw-list-item" id="ca-viewsource"><a accesskey="e" href="/umiacs/index.php?title=Nexus&amp;action=edit" title="This page is protected.
You can view its source [e]"><span>View source</span></a></li><li class="mw-list-item" id="ca-history"><a accesskey="h" href="/umiacs/index.php?title=Nexus&amp;action=history" title="Past revisions of this page [h]"><span>View history</span></a></li></ul>
</div>
</nav>
<nav aria-labelledby="p-cactions-label" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" id="p-cactions" role="navigation" title="More options">
<input aria-haspopup="true" aria-labelledby="p-cactions-label" class="vector-menu-checkbox" data-event-name="ui.dropdown-p-cactions" id="p-cactions-checkbox" role="button" type="checkbox"/>
<label class="vector-menu-heading" id="p-cactions-label">
<span class="vector-menu-heading-label">More</span>
</label>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"></ul>
</div>
</nav>
<div class="vector-search-box-vue vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box" id="p-search" role="search">
<div>
<h3>
<label for="searchInput">Search</label>
</h3>
<form action="/umiacs/index.php" class="vector-search-box-form" id="searchform">
<div class="vector-search-box-inner" data-search-loc="header-navigation" id="simpleSearch">
<input accesskey="f" aria-label="Search UMIACS" autocapitalize="sentences" class="vector-search-box-input" id="searchInput" name="search" placeholder="Search UMIACS" title="Search UMIACS [f]" type="search"/>
<input name="title" type="hidden" value="Special:Search"/>
<input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext" title="Search the pages for this text" type="submit" value="Search"/>
<input class="searchButton" id="searchButton" name="go" title="Go to a page with this exact name if it exists" type="submit" value="Go"/>
</div>
</form>
</div>
</div>
</div>
</div>
<div id="mw-panel">
<div id="p-logo" role="banner">
<a class="mw-wiki-logo" href="/umiacs/index.php/Main_Page" title="Visit the main page"></a>
</div>
<nav aria-labelledby="p-navigation-label" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" id="p-navigation" role="navigation">
<h3 class="vector-menu-heading" id="p-navigation-label">
<span class="vector-menu-heading-label">Navigation</span>
</h3>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"><li class="mw-list-item" id="n-mainpage"><a accesskey="z" href="/umiacs/index.php/Main_Page" title="Visit the main page [z]"><span>Main Page</span></a></li><li class="mw-list-item" id="n-Getting-Started"><a href="/umiacs/index.php/GettingStarted"><span>Getting Started</span></a></li><li class="mw-list-item" id="n-Core-Services"><a href="/umiacs/index.php/CoreServices"><span>Core Services</span></a></li><li class="mw-list-item" id="n-Lab-Facilities"><a href="/umiacs/index.php/LabFacilities"><span>Lab Facilities</span></a></li><li class="mw-list-item" id="n-Placing-Orders"><a href="/umiacs/index.php/Orders"><span>Placing Orders</span></a></li><li class="mw-list-item" id="n-Support"><a href="/umiacs/index.php/HelpDesk"><span>Support</span></a></li></ul>
</div>
</nav>
<nav aria-labelledby="p-tb-label" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" id="p-tb" role="navigation">
<h3 class="vector-menu-heading" id="p-tb-label">
<span class="vector-menu-heading-label">Tools</span>
</h3>
<div class="vector-menu-content">
<ul class="vector-menu-content-list"><li class="mw-list-item" id="t-whatlinkshere"><a accesskey="j" href="/umiacs/index.php/Special:WhatLinksHere/Nexus" title="A list of all wiki pages that link here [j]"><span>What links here</span></a></li><li class="mw-list-item" id="t-recentchangeslinked"><a accesskey="k" href="/umiacs/index.php/Special:RecentChangesLinked/Nexus" rel="nofollow" title="Recent changes in pages linked from this page [k]"><span>Related changes</span></a></li><li class="mw-list-item" id="t-specialpages"><a accesskey="q" href="/umiacs/index.php/Special:SpecialPages" title="A list of all special pages [q]"><span>Special pages</span></a></li><li class="mw-list-item" id="t-print"><a accesskey="p" href="javascript:print();" rel="alternate" title="Printable version of this page [p]"><span>Printable version</span></a></li><li class="mw-list-item" id="t-permalink"><a href="/umiacs/index.php?title=Nexus&amp;oldid=12153" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li class="mw-list-item" id="t-info"><a href="/umiacs/index.php?title=Nexus&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
</div>
</nav>
</div>
</div>
<footer class="mw-footer" id="footer" role="contentinfo">
<ul id="footer-info">
<li id="footer-info-lastmod"> This page was last edited on 24 October 2024, at 18:58.</li>
</ul>
<ul id="footer-places">
<li id="footer-places-privacy"><a href="/umiacs/index.php/UMIACS:Privacy_policy">Privacy policy</a></li>
<li id="footer-places-about"><a href="/umiacs/index.php/UMIACS:About">About UMIACS</a></li>
<li id="footer-places-disclaimer"><a href="/umiacs/index.php/UMIACS:General_disclaimer">Disclaimers</a></li>
</ul>
<ul class="noprint" id="footer-icons">
<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img alt="Powered by MediaWiki" height="31" loading="lazy" src="/umiacs/resources/assets/poweredby_mediawiki_88x31.png" srcset="/umiacs/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /umiacs/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88"/></a></li>
</ul>
</footer>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.025","walltime":"0.028","ppvisitednodes":{"value":124,"limit":1000000},"postexpandincludesize":{"value":470,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":5437,"limit":5000000},"timingprofile":["100.00%    3.569      1 Template:Nfshomes","100.00%    3.569      1 -total"]},"cachereport":{"timestamp":"20241029232448","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":160});});</script>
</body>
</html>